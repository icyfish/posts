<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="IDYUPnBNhdnU8o9LRNKZ1RSt14tIxTI0rLeMrBtswXw"><title> 类型, 运算符 · Fish</title><meta name="description" content="类型, 运算符 - Fish"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/posts/favicon.png"><link rel="stylesheet" href="/posts/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://icyfish.github.io/posts/atom.xml" title="Fish"><meta name="generator" content="Hexo 7.0.0-rc1"></head><body><div class="wrap"><header><a href="/posts/" class="logo-link"><img src="/posts/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/posts/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/posts/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/posts/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="http://twitter.com/icyfish_" target="_blank" class="nav-list-link">TWITTER</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">类型, 运算符</h1><div class="post-info">Oct 25, 2016</div><div class="post-content"><p>JavaScript的变量类型是动态类型, 因此语言中会有很多强制转换的情况发生. 运算符实际上是一种特殊的函数. </p>
<a id="more"></a>
<h2 id="动态类型-Dynamic-Typing"><a href="#动态类型-Dynamic-Typing" class="headerlink" title="动态类型 Dynamic Typing:"></a>动态类型 Dynamic Typing:</h2><p>在JavaScript中,定义一个变量时,不需要显式声明变量的类型,JS引擎在代码运行时会自动识别变量类型,所以在程序执行时,一个变量在不同时间可以拥有不同的类型.</p>
<p>Java, C#的变量类型是静态的(Static Typing), 即需要显式声明变量类型,而且在程序执行过程中类型不可改变.</p>
<p><strong>Static Typing:</strong></p>
<p><code>bool isNew = &quot;hello&quot;;</code> 会提示错误.</p>
<p><strong>Dynamic Typing:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isNew = <span class="literal">true</span>; <span class="comment">// 没有错误</span></span><br><span class="line">isNew = <span class="string">'yup!'</span>;</span><br><span class="line">isNew = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h2 id="原始类型-Primitive-Types"><a href="#原始类型-Primitive-Types" class="headerlink" title="原始类型 Primitive Types:"></a>原始类型 Primitive Types:</h2><p>原始类型(定义): A type of data that represents a single value. (在JS中也就是: 不是对象,不存在方法)</p>
<p><strong>JS中有6种原始类型:</strong></p>
<p>   <strong>1. undefined</strong>: (represents lack of existence), <code>undefined</code>是JavaScript语言中的一个特殊值,变量的值是undefined表明这个变量未被赋值.</p>
<p>   <strong>不要手动将变量值设为undefined!!</strong> 因为在调试时会出现混乱,不知道是自己将变量设置为undefined还是变量未被赋值.</p>
<p>   <strong>2. null</strong>: (also represents lack of existence), 可以手动将变量值设置为null.</p>
<p>   <strong>3. boolean</strong></p>
<p>   <strong>4. number</strong>: 在JavaScript中只有这一种类型()来表示数字, 不像其他编程语言, 有整数, 浮点数, 定点数等.</p>
<p>   <strong>5. string</strong></p>
<p>   <strong>6. symbol</strong>: ECMAScript 2015中新加入的类型</p>
<h2 id="运算符-operators"><a href="#运算符-operators" class="headerlink" title="运算符 operators"></a>运算符 operators</h2><p>运算符实际上是一种特殊的函数, 只是在句法结构上与一般的函数不同, 一般来说, 运算符接受两个参数, 返回一个结果.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">3</span> + <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p><code>+</code>是运算符, 实际上是一个函数<br>对于上述代码, JS引擎实际是这样执行的:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> +(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="comment">// 返回 a + b 的结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么如果想要调用这个函数, 就该这样做 <code>+(3,4);</code>, 但是这样太过麻烦, 为了简便JS引擎实现了 <strong>中缀标记法(infix notation)</strong>, 于是就可以用这种形式调用函数 <code>3+4</code>;</p>
<h3 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h3><p>运算符优先级指哪个运算符会被先调用, 即最先执行.  </p>
<h3 id="关联性Associativity"><a href="#关联性Associativity" class="headerlink" title="关联性Associativity"></a>关联性Associativity</h3><p>关联性决定了拥有相同优先级的运算符的执行顺序, 如果与左边关联性较强, 那么先执行左边的部分, 反之同理.</p>
<p>具体的优先级和关联性详见<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">Operator Precedence</a>中的表格.</p>
<h2 id="强制转换-coercion"><a href="#强制转换-coercion" class="headerlink" title="强制转换 coercion"></a>强制转换 coercion</h2><p>将某一类型的变量强制转换成另一种类型, 因为JS是Dynamic Typing, 所以强制转换在语言中很常见. 强制转换包括隐式强制转换和显式强制转换. <a href="https://github.com/icyfish/You-Dont-Know-JS/blob/master/types%20%26%20grammar/ch4.md" target="_blank" rel="noopener">详见</a></p>
<p><strong>隐式强制转换:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> + <span class="string">'2'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="comment">//'12'</span></span><br></pre></td></tr></table></figure>
<p>在内存中<code>1</code>和<code>&#39;1&#39;</code>完全不同, 但在函数执行过程中JS引擎将数字1强制转换为字符. 在一些其他语言中会抛出错误.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span> &lt; <span class="number">2</span> &lt; <span class="number">1</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// 因为优先级相同, `&lt;`是左关联性较强的操作符, `3 &lt; 2`返回false</span></span><br><span class="line"><span class="comment">// 所以实际上是 `false &lt; 1` 的比较, 布尔值会被强制转换为数字</span></span><br><span class="line"><span class="comment">// false被强制转换为0, `0 &lt; 1` 自然返回true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> &lt; <span class="number">2</span> &lt; <span class="number">3</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// 返回true的原因并不是1小于2小于3</span></span><br><span class="line"><span class="comment">// 而是 `1 &lt; 2` 返回true</span></span><br><span class="line"><span class="comment">// true被强制转换为1, `1 &lt; 3`</span></span><br><span class="line"><span class="comment">// 因此最终结果为true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="number">0</span>;</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> &lt; <span class="number">1</span>;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == <span class="number">0</span>;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="string">""</span> == <span class="number">0</span>;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="string">""</span> == <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>强制转换功能强大, 但也很危险. 用 <code>===</code>(严格相等) 来比较值不会进行强制转换, 因此在比较值时, 多用 <code>===</code> 而不是 <code>==</code>.</p>
<p><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank" rel="noopener">JavaScript中的相等性判断</a></p>
<p><strong>显式强制转换:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>);</span><br><span class="line"><span class="comment">// NaN  </span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="存在性和布尔值"><a href="#存在性和布尔值" class="headerlink" title="存在性和布尔值"></a>存在性和布尔值</h3><p>表示不存在含义的值会被强制转换为<code>false</code>, 如<code>undefined</code>, <code>null</code>, <code>&quot;&quot;</code>.<br>因此可以利用coercion判断某个变量的存在性.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'something is there.'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不会有输出, 因为a被强制转换为false.</span></span><br></pre></td></tr></table></figure>
<p>如果a为<code>undefined</code>, <code>null</code>, <code>&quot;&quot;</code>中任意一个, 程序就不会有输出, 有个例外情况, 若a的值为0, 程序也不会有输出, 但0并不是不存在.</p>
<p>可以这样改进:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a || a === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'something is there.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello '</span>+ name);</span><br><span class="line">&#125;</span><br><span class="line">greet(<span class="string">'Tony'</span>);</span><br><span class="line"><span class="comment">// 'Hello Tony';</span></span><br><span class="line">greet();</span><br><span class="line"><span class="comment">// 若不传入参数, 很多其他编程会抛出错误</span></span><br><span class="line"><span class="comment">// 但是JavaScript这样输出:</span></span><br><span class="line"><span class="comment">// 'Hello undefined';</span></span><br></pre></td></tr></table></figure>
<p>可以这样改进:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  name = name || <span class="string">'&lt;Your name here&gt;'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello '</span>+ name);</span><br><span class="line">&#125;</span><br><span class="line">greet();</span><br></pre></td></tr></table></figure>
<p>运用ES6的改进方式:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greet = <span class="function">(<span class="params">name=<span class="string">'&lt;Your name here&gt;'</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line">greet();</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://www.udemy.com/understand-javascript/" target="_blank" rel="noopener">JavaScript: Understanding the Weird Parts</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/posts/2016/10/28/objects-functions/" class="prev">PREV</a><a href="/posts/2016/10/15/execution-context/" class="next">NEXT</a></div><div class="copyright"><p>© 2019 - 2023 <a href="https://icyfish.github.io/posts">Fish</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>